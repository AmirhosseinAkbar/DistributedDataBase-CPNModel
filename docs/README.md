# DistributedDataBase-CPNModel

اين مثال يک پايگاه داده توزيع شده بسيار
ساده با n سايت های مختلف را توصيف می کند (n
يک عدد صحيح مثبت است که فرض می شود بيشتر از
يا مساوی ٣ باشد). هر سايت دارای يک کپی از
تمام داده ها است و اين نسخه توسط يک مدير
پايگاه داده محلی اداره می شود. بنابراين ما
مجموعه ای از مديران پايگاه داده را داريم:

```
DBM = {d1, d2, …, dn}
```
هر مدير مجاز است يک نسخه به روزرسانی را
برای نسخه خود از پايگاه داده ايجاد کند -
اما پس از آن بايد برای ساير مديران پيامی
ارسال کند (برای اين که آنها بتوانند به
روزرسانی مشابه را روی نسخه خود از پايگاه
داده انجام دهند). در اين مثال ما به محتوای
پيام علاقه نداريم - بلکه فقط به اطلاعات مربوط
به عنوان است که فرستنده و گيرنده را توصيف
می کند. بنابراين ما مجموعه ای از پيام های
زير را داريم:
```
MES = {(s,r) | s,r∈DBM ∧ s≠r}
```
که در آن فرستنده و گيرنده r دو مدير پايگاه
داده متفاوت هستند. هنگامی که يک مدير پايگاه
داده يک بروزرسانی را ايجاد می کند ، بايد
پيامی را به همه مديران ديگر ، يعنی پيام های
زير ارسال کند:

<a href="https://www.codecogs.com/eqnedit.php?latex=\sum_{r\in&space;DBM-\{s\}}&space;\1`(s,r)" target="_blank"><img src="https://latex.codecogs.com/gif.latex?\sum_{r\in&space;DBM-\{s\}}&space;\1`(s,r)" title="\sum_{r\in DBM-\{s\}} \1`(s,r)" /></a>

که در این جمع نشان می دهد که ما با اضافه
کردن چند مجموعه ، مجموعه ای با اندازه 
n-1
تشکيل می دهيم 
که هر يک از
آنها يک عنصر واحد دارد. چند مجموعه حاصل
شامل يک ظاهر از هر پيام است که دارای عنوان
ارسال کننده است.
اين تعاريف با هم اظهارات زير را به ما ارائه
می دهند:

```
constants:      n : integer (* n≥3 *);

colour sets:    DBM = {d1, d2, …, dn};
                MES = {(s,r) | s,r∈DBM ∧ s≠r}
                E = {e};
 variables:     s,r : DBM;
 ```

<a href="https://www.codecogs.com/eqnedit.php?latex=functions:&space;Mes(s)=&space;\sum_{r\in&space;DBM-\{s\}}&space;\1`(s,r)" target="_blank"><img src="https://latex.codecogs.com/gif.latex?functions:&space;Mes(s)=&space;\sum_{r\in&space;DBM-\{s\}}&space;\1`(s,r)" title="functions: Mes(s)= \sum_{r\in DBM-\{s\}} \1`(s,r)" /></a>

حال اجازه دهيد نگاهی به 
CP-net
 بيندازيم (در
صفحه بعد نشان داده شده است). هر مدير بانک
اطلاعاتی دارای سه حالت مختلف است: غيرفعال ،
انتظار (برای تصديق) و عملکرد (به روزرسانی
درخواست شده توسط مدير ديگر). هر پيام می
تواند در چهار حالت مختلف باشد: بلا استفاده ،
ارسال شده ، دريافت شده و تأييد. سرانجام ،
سيستم می تواند فعال يا
Passive
باشد
در ابتدا همه مديران غيرفعال هستند و همه
پيامها بدون استفاده هستند. اين توسط عبارات
اوليه سازی نشان داده شده است.

`DBM.all()`
مجموعه ای را توليد می کند که دقيقاК يک شکل
از هر رنگ را در مجموعه رنگ
DBM
نشان می
دهد. به طور مشابه ،
`MES.all()`
مجموعه ای را
توليد می کند که دقيقاК يک شکل از هر رنگ را
در مجموعه رنگ 
MES
ايجاد می کند.
هنگامی که يک مدير تصميم به ايجاد يک به
روزرسانی و ارسال پيام می کند ، وضعيت آن از
غيرفعال به انتظار تغيير می کند ، در حالی که
وضعيت پيام های خود 
MES
از
Unused
به
ارسال می شود. حالا مدير بايد منتظر بماند تا
ساير مديران به روزرسانی را تصديق کنند.
هنگامی که يکی از اين مديران ديگر ، 
 ، يک
پيام دريافت می کند ، وضعيت آن از حالت
غيرفعال به انجام (بروزرسانی) تغيير می کند ،
در حالی که وضعيت پيام (های ،
 (مربوطه از
ارسال به دريافت تغيير می کند. در مرحله بعد
مدير پايگاه داده r ممکن است يک اذعان ارسال
کند (می گويد که به روزرسانی را تمام کرده
است) و وضعيت آن از عملکرد برگشت به غيرفعال
تغيير می کند ، در حالی که وضعيت پيام (ها ،
r (تغيير می کند از دريافت به تصديق. هنگامی
که همه پيام های پيام (ها) ، که توسط مدير
ارسال شده است ، مورد تأييد قرار گرفتند ،
مدير ممکن است تمام قدردانی ها و تغيير وضعيت
آن را از انتظار در بازگشت به غيرفعال دريافت
کند ، در حالی که وضعيت پيام های آن از (ها) 
تغيير می کند از مورد تأييد بازگشت به
بلااستفاده قرار گرفت.


